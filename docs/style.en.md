# Style

## Enum

### Node Shape

The available point shapes (`xgmml.utils.style_utils.NODE_SHAPES`) are as follows:

| Enum              |                             Example                              |
| ----------------- | :---------------------------------------------------------------:|
| ELLIPSE           |      <img src="/images/node_shapes/ELLIPSE.png" width="24">      |
| RECTANGLE         |     <img src="/images/node_shapes/RECTANGLE.png" width="24">     |
| HEXAGON           |      <img src="/images/node_shapes/HEXAGON.png" width="24">      |
| OCTAGON           |      <img src="/images/node_shapes/OCTAGON.png" width="24">      |
| DIAMOND           |      <img src="/images/node_shapes/DIAMOND.png" width="24">      |
| TRIANGLE          |     <img src="/images/node_shapes/TRIANGLE.png" width="24">      |
| ROUNDED_RECTANGLE | <img src="/images/node_shapes/ROUNDED_RECTANGLE.png" width="24"> |

### Line Type

The available line types (`xgmml.utils.style_utils.LINE_TYPES`) are as follows:

| Enum             |                           Example                            |
| ---------------- | :----------------------------------------------------------: |
| SOLID            |     <img src="/images/line_types/SOLID.png" width="48">      |
| LONG_DASH        |   <img src="/images/line_types/LONG_DASH.png" width="48">    |
| DOT              |      <img src="/images/line_types/DOT.png" width="48">       |
| DASH_DOT         |    <img src="/images/line_types/DASH_DOT.png" width="48">    |
| EQUAL_DASH       |   <img src="/images/line_types/EQUAL_DASH.png" width="48">   |
| PARALLEL_LINES   | <img src="/images/line_types/PARALLEL_LINES.png" width="48"> |
| VERTICAL_SLASH   | <img src="/images/line_types/VERTICAL_SLASH.png" width="48"> |
| FORWARD_SLASH    | <img src="/images/line_types/FORWARD_SLASH.png" width="48">  |
| BACKWARD_SLASH   | <img src="/images/line_types/BACKWARD_SLASH.png" width="48"> |
| CONTIGUOUS_ARROW | <img src="/images/line_types/CONTIGUOUS_ARROW.png" width="48"> |
| SEPARATE_ARROW   | <img src="/images/line_types/SEPARATE_ARROW.png" width="48"> |
| SINEWAVE         |    <img src="/images/line_types/SINEWAVE.png" width="48">    |
| ZIGZAG           |     <img src="/images/line_types/ZIGZAG.png" width="48">     |

### Arrow Shape

The available arrow shapes (`xgmml.utils.style_utils.ARROW_SHAPES`) are as follows:

| Enum             |                           Example                            |
| ---------------- | :----------------------------------------------------------: |
| ARROW            |    <img src="/images/arrow_shapes/ARROW.png" width="48">     |
| ARROW_SHORT      | <img src="/images/arrow_shapes/ARROW_SHORT.png" width="48">  |
| CIRCLE           |    <img src="/images/arrow_shapes/CIRCLE.png" width="48">    |
| CROSS_DELTA      | <img src="/images/arrow_shapes/CROSS_DELTA.png" width="48">  |
| CROSS_OPEN_DELTA | <img src="/images/arrow_shapes/CROSS_OPEN_DELTA.png" width="48"> |
| DELTA            |    <img src="/images/arrow_shapes/DELTA.png" width="48">     |
| DELTA_SHORT_1    | <img src="/images/arrow_shapes/DELTA_SHORT_1.png" width="48"> |
| DELTA_SHORT_2    | <img src="/images/arrow_shapes/DELTA_SHORT_2.png" width="48"> |
| DIAMOND          |   <img src="/images/arrow_shapes/DIAMOND.png" width="48">    |
| DIAMOND_SHORT_1  | <img src="/images/arrow_shapes/DIAMOND_SHORT_1.png" width="48"> |
| DIAMOND_SHORT_2  | <img src="/images/arrow_shapes/DIAMOND_SHORT_2.png" width="48"> |
| HALF_BOTTOM      | <img src="/images/arrow_shapes/HALF_BOTTOM.png" width="48">  |
| HALF_CIRCLE      | <img src="/images/arrow_shapes/HALF_CIRCLE.png" width="48">  |
| HALF_TOP         |   <img src="/images/arrow_shapes/HALF_TOP.png" width="48">   |
| NONE             |                                                              |
| OPEN_CIRCLE      | <img src="/images/arrow_shapes/OPEN_CIRCLE.png" width="48">  |
| OPEN_DELTA       |  <img src="/images/arrow_shapes/OPEN_DELTA.png" width="48">  |
| OPEN_DIAMOND     | <img src="/images/arrow_shapes/OPEN_DIAMOND.png" width="48"> |
| OPEN_HALF_CIRCLE | <img src="/images/arrow_shapes/OPEN_HALF_CIRCLE.png" width="48"> |
| OPEN_SQUARE      | <img src="/images/arrow_shapes/OPEN_SQUARE.png" width="48">  |
| SQUARE           |    <img src="/images/arrow_shapes/SQUARE.png" width="48">    |
| T                |      <img src="/images/arrow_shapes/T.png" width="48">       |

### Color

The default discrete colors (`xgmml.utils.style_utils.COLORS`) are as follows:

| HEX     |                           Example                            |
| ------- | :----------------------------------------------------------: |
| #1783FF | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#1783FF"/></svg> |
| #00C9C9 | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#00C9C9"/></svg> |
| #F0884D | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#F0884D"/></svg> |
| #D580FF | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#D580FF"/></svg> |
| #7863FF | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#7863FF"/></svg> |
| #60C42D | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#60C42D"/></svg> |
| #BD8F24 | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#BD8F24"/></svg> |
| #FF80CA | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#FF80CA"/></svg> |
| #2491B3 | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#2491B3"/></svg> |
| #17C76F | <svg width="60" height="20" xmlns="http://www.w3.org/2000/svg"><rect width="60" height="20" fill="#17C76F"/></svg> |

The default continuous color is coolwarm in matplotlib, as shown below:

<img src="/images/colors/default_discrete_color.png" width="500">

## Mapper

### Base mapper

The base mapper is the base class for all mappers:

```python
class StyleMapper(ABC):
    def __init__(self, values: list, **kwargs):
        self._values = values

    @abstractmethod
    def map(self, value):
        raise NotImplementedError()
```

The mapper maps style values via the `map` method. The `kwargs` in the `write` method of the `XGMMLWriter` object will be passed to the initialization method of the `StyleMapper` class.

### Discrete mapper

The default discrete style mappers are:

- Point shape: `xgmml.style.style_mapper.StyleNodeShapeDefaultDiscreteMapper`
- Color: `xgmml.style.style_mapper.StyleColorDefaultDiscreteMapper`
- Line type: `xgmml.style.style_mapper.StyleLineTypeDefaultDiscreteMapper`
- Arrow shape: `xgmml.style.style_mapper.StyleArrowShapeDefaultDiscreteMapper`

Custom discrete style mappers need to inherit from the `xgmml.style.style_mapper.StyleDiscreteMapper` class:

```python
class StyleDiscreteMapper(StyleMapper):
    def __init__(self, values: list, styles: list, **kwargs):
        super(StyleDiscreteMapper, self).__init__(values)

        self._styles = styles
        self._categories = sorted(set(values), key=self._sort_key)

    def _sort_key(self, value):
        return value

    def map(self, value):
        category_idx = self._categories.index(value)
        style_idx = category_idx % len(self._styles)

        return self._styles[style_idx]
```

While, `values` is a list of discrete values, and `styles` is a list of corresponding styles.

Custom color discrete style mappers need to inherit from the `xgmml.style.style_mapper.StyleColorDiscreteMapper` class:

```python
class StyleColorDiscreteMapper(StyleMapper):
    def __init__(self, values: list, colormap: mpl.colors.ListedColormap, **kwargs):
        super(StyleColorDiscreteMapper, self).__init__(values)

        self._colors = colormap.colors
        self._categories = sorted(set(values), key=self._sort_key)

    def _sort_key(self, value):
        return value

    def map(self, value):
        category_idx = self._categories.index(value)
        color_idx = category_idx % len(self._colors)

        return mpl.colors.to_hex(self._colors[color_idx])
```

While, `values` is a list of discrete values, and `colormap` is an instance of `mpl.colors.ListedColormap` of matplotlib.

All of the above can overload the `_sort_key` method, which is used for the sorting key of discrete values.

### Continuous mapper

The default continuous style mappers are:

- Point size: `xgmml.style.style_mapper.StyleNodeSizeDefaultContinuousMapper`
- Font size: `xgmml.style.style_mapper.StyleFontSizeDefaultContinuousMapper`

Custom continuous style mappers need to inherit from the `xgmml.style.style_mapper.StyleContinuousMapper` class:

```python
class StyleContinuousMapper(StyleMapper):
    def __init__(self, values: list, **kwargs):
        super(StyleContinuousMapper, self).__init__(values)

        self._min_value = min(self._values)
        self._max_value = max(self._values)

    def _transform_value(self, value) -> float:
        if self._max_value - self._min_value == 0:
            return 0.0

        return (value - self._min_value) / (self._max_value - self._min_value)

    def map(self, value):
        return self._transform_value(value)
```

While, `values` is a list of continuous values. You can overload the `_transform_value` method, which is used to convert the original value to the mapped value.

Custom color discrete style mappers need to inherit from the `xgmml.style.style_mapper.StyleColorContinuousMapper` class:

```python
class StyleColorContinuousMapper(StyleMapper):
    def __init__(
            self, values: list, colormap: mpl.colors.LinearSegmentedColormap, **kwargs
    ):
        super(StyleColorContinuousMapper, self).__init__(values)

        self._colormap = colormap
        self._normalizer = mpl.colors.Normalize(vmin=min(values), vmax=max(values))

    def map(self, value):
        color = self._colormap(self._normalizer(value))

        return mpl.colors.to_hex(color).upper()
```

Among them, `values` is a list of discrete values, and `colormap` is an instance of `mpl.colors.ListedColormap` of matplotlib.

### Passthrough mapper

A passthrough mapper is a mapper that does not perform any mapping and directly returns the original value:

```python
class StylePassthroughMapper(StyleMapper):
    def __init__(self, values: list, **kwargs):
        super(StylePassthroughMapper, self).__init__(values)

    def map(self, value):
        return value
```
